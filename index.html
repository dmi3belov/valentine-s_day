<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞ üíñ</title>
<style>
:root {
  --bg: #0b0b14;
  --neon-pink: #ff4fd8;
  --neon-blue: #4df0ff;
  --text: #ffffff;
  --card: rgba(255,255,255,0.06);
  --neon-green: #39ff14;
}

* { box-sizing: border-box; font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }

body {
  margin: 0;
  background: radial-gradient(circle at top, #1a0033, var(--bg));
  color: var(--text);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

.screen {
  display: none;
  width: 100%;
  max-width: 420px;
  padding: 24px;
  text-align: center;
  animation: fadeIn 0.6s ease;
}

.screen.active { display: block; }

h1, h2 { text-shadow: 0 0 10px var(--neon-pink); }
p { line-height: 1.5; opacity: 0.95; }

.card {
  background: var(--card);
  border-radius: 20px;
  padding: 24px;
  box-shadow:
    0 0 20px rgba(255,79,216,0.2),
    inset 0 0 20px rgba(255,255,255,0.03);
}

button {
  margin-top: 20px;
  padding: 14px 22px;
  border-radius: 999px;
  border: none;
  background: linear-gradient(135deg, var(--neon-pink), var(--neon-blue));
  color: #000;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 0 15px var(--neon-pink);
  transition: transform 0.2s ease;
}

button:active { transform: scale(0.95); }
button:disabled { opacity: .4; filter: grayscale(1); box-shadow: none; cursor: not-allowed; }

ul { list-style: none; padding: 0; text-align: left; margin-top: 20px; }
li { margin-bottom: 10px; opacity: 0; transform: translateX(-20px); display: flex; align-items: center; }
li .check { opacity: 0; margin-right: 10px; transition: opacity 0.3s ease; }
li span { color: var(--text); opacity: 1; transition: color 0.3s ease; }
li span.neon { color: var(--neon-green); text-shadow: 0 0 4px var(--neon-green), 0 0 10px var(--neon-green); }

/* –¢–µ–∫—Å—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ */
#compatibility {
  opacity: 0;
  margin-top: 20px;
  text-align: center;
}
#compatibility .main {
  font-size: 18px;
  color: var(--text);
  text-shadow: 0 0 10px var(--neon-pink);
  font-weight: 600;
  animation: neonGlow 1.2s infinite alternate;
}
#compatibility .sub {
  font-size: 14px;
  color: #ffffff;
  display: block;
  margin-top: 4px;
}

@keyframes neonGlow {
  0% { text-shadow: 0 0 8px var(--neon-pink), 0 0 15px var(--neon-pink); }
  100% { text-shadow: 0 0 12px var(--neon-pink), 0 0 25px var(--neon-pink); }
}

.progress {
  margin: 20px 0;
  height: 14px;
  border-radius: 999px;
  overflow: visible;
  background: rgba(255,255,255,0.1);
  position: relative;
}

.progress-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--neon-pink), var(--neon-blue));
  box-shadow: 0 0 10px var(--neon-pink);
  border-radius: 999px;
  transition: width 0.2s linear;
}

#loadText { margin-top: 10px; font-weight: 600; letter-spacing: 1px; text-shadow: 0 0 8px var(--neon-blue); }
#errorText { margin-top: 6px; color: var(--neon-pink); font-size: 14px; opacity: 0; text-shadow: 0 0 10px var(--neon-pink); min-height:38px; transition: opacity 0.3s ease; }

.glitch { animation: glitch 0.2s linear infinite; }

@keyframes glitch {
  0%   { transform: translate(0); }
  20%  { transform: translate(-2px, 2px); }
  40%  { transform: translate(2px, -2px); }
  60%  { transform: translate(-2px, -1px); }
  80%  { transform: translate(1px, 2px); }
  100% { transform: translate(0); }
}

/* GAME */
.game {
  position: relative;
  height: 300px;
  margin-top: 20px;
  border-radius: 16px;
  background: rgba(0,0,0,0.3);
  overflow: hidden;
}

.heart {
  position: absolute;
  font-size: 28px;
  cursor: pointer;
  user-select: none;
  animation: float 2s ease-in-out infinite;
}

.no-btn { position: relative; }
.footer { margin-top: 30px; font-size: 12px; opacity: 0.4; }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes float {
  0% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
  100% { transform: translateY(0); }
}
#screen2 ul { padding-left: 52px; }
</style>
</head>
<body>

<!-- SCREEN 1 -->
<div class="screen active" id="screen1">
  <div class="card" style="min-height:250px; display:flex; flex-direction:column; justify-content:center;">
    <h2>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á—É–≤—Å—Ç–≤‚Ä¶</h2>
    <p>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É üíï</p>

    <div class="progress">
      <div class="progress-bar" id="loader"></div>
    </div>
    <p id="loadText">0%</p>
    <p id="errorText">–û–±–Ω–∞—Ä—É–∂–µ–Ω –ø–µ—Ä–µ–∏–∑–±—ã—Ç–æ–∫ —á—É–≤—Å—Ç–≤.
    –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞...</p>

    <button id="continueBtn" disabled>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
  </div>
</div>

<!-- SCREEN 2 -->
<div class="screen" id="screen2">
  <div class="card">
    <h2>–ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–¥—Ö–æ–¥–∏—à—å –ª–∏ —Ç—ã –º–Ω–µ üß†üíì</h2>
    <ul id="checklist">
      <li><span>–ö—Ä–∞—Å–∏–≤–∞—è</span></li>
      <li><span>–°–º–µ—à–Ω–∞—è</span></li>
      <li><span>–£–º–Ω–∞—è</span></li>
      <li><span>–ú–∏–ª–∞—è</span></li>
      <li><span>–í—Å—ë –µ—â—ë —á–∏—Ç–∞–µ—à—å —ç—Ç–æ</span></li>
    </ul>
    <p id="compatibility">
      <span class="main">100% —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</span><br>
      <span class="sub">(–î–∞, —è —Ç–æ–∂–µ —É–¥–∏–≤–ª—ë–Ω üòè)</span>
    </p>
    <button id="nextBtn" onclick="nextScreen(3)" disabled>–ß—Ç–æ –¥–∞–ª—å—à–µ?</button>
  </div>
</div>

<!-- SCREEN 3 -->
<div class="screen" id="screen3">
  <div class="card">
    <p><strong>–í–Ω–∏–º–∞–Ω–∏–µ.</strong><br>–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞.</p>
    <p style="margin-top:16px">
      –Ø —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ –¥—É–º–∞—é –æ —Ç–µ–±–µ.<br>
      –ò—Å–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ —Å–æ–±–∏—Ä–∞—é—Å—å üòå
    </p>
    <button onclick="startGame()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª—é–±–≤–∏</button>
  </div>
</div>

<!-- SCREEN 4 GAME -->
<div class="screen" id="screen4">
  <div class="card">
    <h2>–£—Ä–æ–≤–µ–Ω—å –ª—é–±–≤–∏ ‚ù§Ô∏è</h2>
    <p>–ü–æ–π–º–∞–π 5 —Å–µ—Ä–¥–µ—á–µ–∫</p>
    <p id="score">üíñ 0 / 5</p>
    <div class="game" id="game"></div>
  </div>
</div>

<!-- SCREEN 5 -->
<div class="screen" id="screen5">
  <div class="card">
    <h2>–í–æ–ø—Ä–æ—Å –∂–∏–∑–Ω–∏ –∏ —Å–µ—Ä–¥—Ü–∞ üíò</h2>
    <p>–¢—ã —Å–æ–≥–ª–∞—Å–Ω–∞ –±—ã—Ç—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π?</p>
    <button onclick="nextScreen(6)">–î–∞ üíñ</button>
    <button onclick="nextScreen(6)">–ö–æ–Ω–µ—á–Ω–æ –¥–∞ üíò</button>
    <button class="no-btn" id="noBtn">–ù–µ—Ç üôà</button>
  </div>
</div>

<!-- SCREEN 6 -->
<div class="screen" id="screen6">
  <div class="card">
    <h1>–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! üíï</h1>
    <p>–¢—ã –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –º–æ–π —Å–∞–º—ã–π –ª—é–±–∏–º—ã–π —á–µ–ª–æ–≤–µ–∫ üíñ</p>
    <p>
      –û–±–µ—â–∞—é –¥–∞—Ä–∏—Ç—å –æ–±–Ω–∏–º–∞—à–∫–∏ ü§ó,<br>
      —Ü–µ–ª–æ–≤–∞—Ç—å üòò<br>
      –∏ —Å–º–µ—à–∏—Ç—å ü§™
    </p>
    <button onclick="vibrate()">–û–±–Ω—è—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞</button>
    <div class="footer">
      P.S. –≠—Ç–æ—Ç —Å–∞–π—Ç —Å–¥–µ–ª–∞–Ω —Å –ª—é–±–æ–≤—å—é<br>
      –∏ –º—ã—Å–ª—è–º–∏ –æ —Ç–µ–±–µ üñ§
    </div>
  </div>
</div>

<script>
let current = 1;
let hearts = 0;

function nextScreen(n){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  current = n;
  document.getElementById(`screen${n}`).classList.add('active');
}

/* ===== LOADER ===== */
const loader = document.getElementById('loader');
const loadText = document.getElementById('loadText');
const errorText = document.getElementById('errorText');
const continueBtn = document.getElementById('continueBtn');

let progress = 0;
let attempt = 1;
let pausePoints = [];

function generatePausePoints(){
  pausePoints = [];
  while(pausePoints.length<3){
    let point = Math.floor(Math.random()*80)+10;
    if(!pausePoints.includes(point)) pausePoints.push(point);
  }
  pausePoints.sort((a,b)=>a-b);
}
generatePausePoints();

function animateProgress(to, callback){
  const step = ()=>{
    if(progress < to){
      progress += 0.5;
      if(progress > to) progress = to;
      loader.style.width = progress+'%';
      loadText.innerText = Math.floor(progress)+'%';

      if(progress > 100){
        loader.style.background = 'linear-gradient(90deg, #ff1a75, #ff4fd8)';
        loader.style.boxShadow = '0 0 15px #ff1a75,0 0 30px #ff4fd8';
      } else {
        loader.style.background = 'linear-gradient(90deg, var(--neon-pink), var(--neon-blue))';
        loader.style.boxShadow = '0 0 10px var(--neon-pink)';
      }

      if(pausePoints.includes(Math.floor(progress)) && progress<=100){
        setTimeout(()=>requestAnimationFrame(step),400);
      } else {
        requestAnimationFrame(step);
      }
    } else if(callback) callback();
  };
  requestAnimationFrame(step);
}

function animateRollback(to, callback){
  const step = ()=>{
    if(progress > to){
      progress -= 1;
      if(progress < to) progress = to;
      loader.style.width = progress+'%';
      loadText.innerText = Math.floor(progress)+'%';
      if(progress <=100){
        loader.style.background = 'linear-gradient(90deg, var(--neon-pink), var(--neon-blue))';
        loader.style.boxShadow = '0 0 10px var(--neon-pink)';
      }
      requestAnimationFrame(step);
    } else if(callback) callback();
  };
  requestAnimationFrame(step);
}

function pauseOverload(){
  errorText.style.opacity=1;
  setTimeout(()=>{
    animateRollback(0, ()=>{
      errorText.style.opacity=0;
      attempt=2;
      setTimeout(startLoading, 500);
    });
  },1500);
}

function startLoading(){
  if(attempt===1) progress=0;
  const interval = setInterval(()=>{
    let nextStep = progress + (Math.random()*6+4);
    if(attempt===1 && progress < 98){
      if(nextStep > 98) nextStep = 98;
      animateProgress(nextStep);
      return;
    }
    if(attempt===1 && progress >= 98){
      clearInterval(interval);
      const overload = Math.floor(Math.random()*9+101);
      setTimeout(()=>{ animateProgress(overload, pauseOverload); }, 500);
      return;
    }
    if(attempt===2 && nextStep >= 100){
      nextStep = 100;
      clearInterval(interval);
      animateProgress(nextStep, ()=>{continueBtn.disabled=false});
      return;
    }
    animateProgress(nextStep);
  }, Math.random()*250+150);
}

setTimeout(startLoading, Math.random()*500+500);
continueBtn.addEventListener('click', ()=> nextScreen(2));

/* ===== SCREEN 2 CHECKLIST ===== */
function showChecklist(){
  const items = document.querySelectorAll('#checklist li');
  const nextBtn = document.getElementById('nextBtn');
  const compText = document.getElementById('compatibility');
  let delay = 500; // –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –ø—É–Ω–∫—Ç–æ–º

  items.forEach((li)=>{
    const span = li.querySelector('span');
    const check = document.createElement('span');
    check.className = 'check';
    check.innerText = '‚úîÔ∏è';
    li.insertBefore(check, span);

    li.style.opacity = 1;
    li.style.transform = 'translateX(0)';

    setTimeout(()=>{
      check.style.opacity = 1;
      setTimeout(()=>{
        span.classList.add('neon');
      }, 300);
    }, delay);

    delay += 1200; // –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø—É–Ω–∫—Ç–∞–º–∏
  });

  // –ü–æ—è–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –≥–∞–ª–æ—á–µ–∫
  setTimeout(()=>{
    compText.style.opacity = 1;
    setTimeout(()=> nextBtn.disabled = false, 500); // –∫–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
  }, delay + 500);
}

const originalNextScreen = nextScreen;
nextScreen = function(n){
  originalNextScreen(n);
  if(n===2) showChecklist();
};

/* ===== GAME ===== */
function startGame(){
  nextScreen(4);
  spawnHeart();
}

function spawnHeart(){
  const game = document.getElementById('game');
  const heart = document.createElement('div');
  heart.className='heart';
  heart.innerText='üíñ';
  heart.style.left = Math.random()*(game.clientWidth-30)+'px';
  heart.style.top = Math.random()*(game.clientHeight-30)+'px';

  heart.onclick=()=>{
    hearts++;
    document.getElementById('score').innerText=`üíñ ${hearts} / 5`;
    heart.remove();
    navigator.vibrate?.(30);
    if(hearts>=5) setTimeout(()=>nextScreen(5),600);
    else spawnHeart();
  };

  game.appendChild(heart);
}

/* ===== NO BUTTON ===== */
const noBtn=document.getElementById('noBtn');
noBtn.addEventListener('touchstart',moveNo);
noBtn.addEventListener('mouseover',moveNo);
function moveNo(){
  noBtn.style.transform=`translate(${Math.random()*200-100}px, ${Math.random()*200-100}px)`;
}

/* ===== VIBRATE ===== */
function vibrate(){ navigator.vibrate?.([100,50,100]); }
</script>

</body>
</html>
